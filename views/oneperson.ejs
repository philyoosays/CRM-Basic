<% include ./partials/personInfo %>

  <form action="/people/<%= contact.id %>/<%= contact.addressid %>/edit" method="get">
    <input type="submit" value="Edit Person">
  </form>

  <div class="stats">
    <h1>This is reserved for statistical data</h1>
  </div>
  <div class="personbuttondiv">
    <ul class="personbuttonul">
      <li class="personbutton">
          <form action="/search" method="get">
            <input type="submit">
          </form>
          Search Contacts</li>
      <li class="personbutton">
          <form action="/people/<%= contact.id %>/gifts" method="get">
            <input type="submit">
          </form>
          Show All Gifts</li>
      <li class="personbutton">
          <form action="/people/<%= contact.id %>/notes" method="get">
            <input type="submit">
          </form>
          Show All Notes</li>
      <li class="personbutton">
          <form action="/people/<%= contact.id %>/contacts" method="get">
            <input type="submit">
          </form>
          More Contact Info</li>
    </ul>
  </div>
  <div>
    <hr />
      <% if(mode === 'gifts') { %>
        <form action="/gifts/<%= contact.id %>/new" method="get">
          <input type="submit" value="New Gift">
        </form>
      <% } else if(mode === 'contacts') { %>
        <form action="/contacts/<%= contact.id %>/new" method="get">
          <input type="submit" value="New Contact">
        </form>
      <% } else if(mode === 'notes') { %>
        <form action="/notes/<%= contact.id %>/new" method="get">
          <input type="submit" value="New Note">
        </form>
      <% } %>
    <hr />
  </div>
  <div class="results">
    <% if(data.length === 0) { %>
      <hr />
      <h1>Select Data To Be Shown</h1>
      <hr />
    <% } else { %>
      <% data.forEach (d => { %>
        <% if(Object.keys(d).indexOf('isrecurring') !== -1) { %>
          <p>Amount: $<%= d.amount %></p>
          <p>Date: <%= d.closedate.toString().slice(0,-23) %></p>
          <p>Campaign: <%= d.campaign %></p>
          <p>Fundraiser: <%= d.firstname %> <%= d.lastname %></p>
          <hr />
        <% } %>
        <% if(Object.keys(d).indexOf('type') !== -1) { %>
          <%= d.type %>: <%= d.contact %> <% if(d.preferred === true) { %><span> - Preferred</span><% } %></p>
          <% if(d.donotcontact === true) { %>
            <p>Do Not Contact</p>
          <% } %>
          <form action="/contacts/<%= d.id %>/edit" method="get">
            <input type="submit" value="Edit Contact">
          </form>
          <form action="/contacts/<%= d.id %>?_method=delete" method="post">
            <input type="submit" value="Delete Contact">
          </form>
          <hr />
        <% } %>
        <% if(Object.keys(d).indexOf('note') !== -1) { %>
          <p>Note Date: <%= d.notedate.toString().slice(0,-14) %> | Made By: <%= d.firstname %> <%= d.lastname %></p>
          <p>Category: <%= d.category %> | Follow Up:
            <% if(d.followup === true) { %>
              <span>Need Follow Up</span>
            <% } else { %>
              <span>Up To Date</span>
            <% } %></p>
          <p>Note:</p>
          <p><%= d.note %></p>
          <form action="/notes/<%= d.id %>/edit" method="get">
            <input type="submit" value="Edit Note">
          </form>
          <form action="/notes/<%= d.id %>?_method=delete" method="post">
            <input type="submit" value="Delete Note">
          </form>
          <hr />
        <% } %>
      <% }) %>
    <% } %>
  </div>
</div>
<script>
  const button1 = document.querySelector('li:nth-of-type(1)');
  const button2 = document.querySelector('li:nth-of-type(2)');
  const button3 = document.querySelector('li:nth-of-type(3)');
  button1.addEventListener('click', () => {
    location
  })
</script>
<% include ./partials/foot %>
